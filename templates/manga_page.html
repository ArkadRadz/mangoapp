{% extends "base.html" %}

{% import 'pagination.html' as pagination %}

{% block content %}

    <div class="row text-center mx-auto">
        <span>Reading <strong>{{ manga.title }}</strong> </br>
            Click <a class="link" href="{{ url_for('manga_overview', id=manga.id) }}">here</a> to return to manga summary
        </span>
    </div>

    {% set image_path = "mangas" + "/" + manga.dir_name + "/" + image.path %}

    <img 
    class="img-responsive mx-auto d-block" id="current_img"
    src="{{ url_for('static', filename=image_path) }}" />

    {% set target_url = url_for('manga_page', manga_id=manga.id) %}
    {{ pagination.render_pagination(manga_images, target_url) }}

    <script>
        document.getElementById('current_img').onclick = function clickEvent(e) {
            let rect = e.target.getBoundingClientRect();
            let x = e.clientX - rect.left;

            if (x < rect.width / 2) {
                moveToPrev();
            } else if (x > rect.width /2) {
                moveToNext();
            }
        }
    </script>
{% endblock %}